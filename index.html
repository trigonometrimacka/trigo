<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TRIGO MASTER - Mobile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #000000; color: #e2e8f0; touch-action: manipulation; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Neon Efektler */
        .neon-text { text-shadow: 0 0 10px rgba(50, 205, 50, 0.7); }
        .neon-border { box-shadow: 0 0 15px rgba(50, 205, 50, 0.3); border-color: #32CD32; }
        
        /* Sekme GeÃ§iÅŸi */
        .tab-panel { display: none; animation: fadeIn 0.3s ease-in-out; }
        .tab-panel.active { display: block; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Slider Ã–zelleÅŸtirme */
        input[type=range] {
            -webkit-appearance: none; background: transparent; width: 100%;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%;
            background: #32CD32; margin-top: -8px; border: 2px solid #000;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 4px; background: #333; border-radius: 2px;
        }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden">

    <header class="p-4 bg-gray-900 border-b border-gray-800 flex justify-between items-center z-50">
        <div>
            <h1 class="text-2xl font-bold tracking-tighter text-green-500 neon-text">TRIGO<span class="text-white">MASTER</span></h1>
            <p class="text-xs text-gray-400">Math & Physics Tool</p>
        </div>
        <div class="text-xs font-mono text-green-400 bg-gray-800 px-2 py-1 rounded">v2.0</div>
    </header>

    <main class="flex-1 overflow-y-auto pb-20 relative">
        
        <div id="tab-edu" class="tab-panel active p-4">
            <div class="space-y-6">
                <div class="w-full rounded-xl overflow-hidden border border-gray-700 shadow-2xl bg-black aspect-video relative group">
                    <iframe class="w-full h-full" src="https://www.youtube.com/embed/TPz9uo9AZ10" title="Trigonometri" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>

                <div class="bg-gray-900 p-5 rounded-xl border-l-4 border-blue-500">
                    <h2 class="text-xl font-bold text-white mb-2">Trigonometri Nedir?</h2>
                    <p class="text-gray-300 text-sm leading-relaxed mb-3">
                        Korkma! Trigonometri sadece <strong>"ÃœÃ§gen Ã–lÃ§Ã¼mÃ¼"</strong> demektir. Bir dik Ã¼Ã§genin kenarlarÄ± arasÄ±ndaki oranlardÄ±r.
                    </p>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li>ğŸ“ <strong>SinÃ¼s (sin):</strong> KarÅŸÄ± Kenar / HipotenÃ¼s</li>
                        <li>ğŸ“ <strong>KosinÃ¼s (cos):</strong> KomÅŸu Kenar / HipotenÃ¼s</li>
                        <li>ğŸ“ˆ <strong>Tanjant (tan):</strong> EÄŸim demektir. (KarÅŸÄ± / KomÅŸu)</li>
                    </ul>
                </div>

                <div class="bg-gray-900 p-5 rounded-xl border-l-4 border-green-500">
                    <h2 class="text-xl font-bold text-white mb-2">Kodlamada SinÃ¼s</h2>
                    <p class="text-gray-300 text-sm leading-relaxed">
                        YazÄ±lÄ±mda `Math.sin(x)` fonksiyonu bize -1 ile 1 arasÄ±nda gidip gelen bir deÄŸer verir. Bu, ses dalgalarÄ±nÄ±, animasyonlarÄ± ve oyunlardaki zÄ±plama hareketlerini oluÅŸturur.
                    </p>
                    <div class="mt-3 bg-black p-3 rounded font-mono text-xs text-green-400 border border-gray-700">
                        // Sonsuz dÃ¶ngÃ¼ (Dalga)<br>
                        let y = Math.sin(zaman);
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-lab" class="tab-panel p-4">
            <div class="bg-gray-900 rounded-xl border border-gray-800 p-4 mb-4">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="font-bold text-white">ğŸ›ï¸ SinÃ¼s JeneratÃ¶rÃ¼</h2>
                    <div id="freq-display" class="font-mono text-green-400 text-sm">440 Hz</div>
                </div>

                <canvas id="sineCanvas" class="w-full h-32 bg-black rounded-lg border border-gray-700 mb-4"></canvas>

                <div class="space-y-4">
                    <div>
                        <label class="text-xs text-gray-500 uppercase">Frekans (Sesin Ä°nceliÄŸi)</label>
                        <input type="range" id="freq-slider" min="50" max="1000" value="440" class="mt-2">
                    </div>
                    
                    <button id="btn-toggle-tone" class="w-full py-3 rounded-lg font-bold bg-gray-700 text-white hover:bg-green-600 transition-all flex justify-center items-center gap-2">
                        <span>â–¶ï¸</span> Kodu Ã‡alÄ±ÅŸtÄ±r & Sesi Duy
                    </button>
                </div>
            </div>

            <div class="bg-black p-4 rounded-xl border border-gray-800">
                <h3 class="text-xs font-bold text-gray-500 uppercase mb-2">Arka Plandaki Kod</h3>
                <pre class="font-mono text-xs text-blue-400 leading-5">
const audioCtx = new AudioContext();
const osilatÃ¶r = audioCtx.createOscillator();

// SinÃ¼s DalgasÄ± SeÃ§
osilatÃ¶r.type = 'sine'; 
osilatÃ¶r.frequency.value = <span id="code-freq-val" class="text-white">440</span>;

osilatÃ¶r.connect(audioCtx.destination);
osilatÃ¶r.start();</pre>
            </div>
        </div>

        <div id="tab-measure" class="tab-panel p-4 h-full flex flex-col">
            <div id="setup-screen" class="flex-1 flex flex-col justify-center">
                <div class="bg-gray-900 p-6 rounded-2xl border border-gray-700 text-center">
                    <div class="text-4xl mb-4">ğŸ—ï¸</div>
                    <h2 class="text-xl font-bold text-white mb-2">YÃ¼kseklik Ã–lÃ§er</h2>
                    <p class="text-gray-400 text-sm mb-6">Telefonun sensÃ¶rlerini kullanarak trigonometrik hesaplama yapar.</p>
                    
                    <div class="text-left space-y-4 mb-6">
                        <div>
                            <label class="text-xs text-gray-500">Hedefe UzaklÄ±k (Metre)</label>
                            <input type="number" id="input-dist" value="5" class="w-full bg-black border border-gray-600 text-white p-3 rounded-lg text-lg focus:border-green-500 outline-none">
                        </div>
                        <div>
                            <label class="text-xs text-gray-500">Telefon YÃ¼ksekliÄŸi (Boyunuz)</label>
                            <input type="number" id="input-height" value="1.70" class="w-full bg-black border border-gray-600 text-white p-3 rounded-lg text-lg focus:border-green-500 outline-none">
                        </div>
                    </div>

                    <button id="btn-start-measure" class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-green-900/50 transition-all">
                        Ã–LÃ‡ÃœMÃœ BAÅLAT
                    </button>
                </div>
            </div>

            <div id="live-screen" class="hidden flex-1 flex flex-col relative">
                <div class="absolute inset-0 flex items-center justify-center pointer-events-none z-0">
                    <div class="w-64 h-64 border-2 border-dashed border-green-500/50 rounded-full flex items-center justify-center relative">
                        <div class="w-full h-0.5 bg-green-500 absolute"></div> <div class="h-full w-0.5 bg-green-500 absolute"></div> </div>
                </div>

                <div class="z-10 mt-10 text-center">
                    <div class="inline-block bg-black/80 backdrop-blur px-6 py-2 rounded-full border border-green-500/30">
                        <span class="text-gray-400 text-xs uppercase">EÄŸim AÃ§Ä±sÄ± (Theta)</span>
                        <div id="val-angle" class="text-3xl font-mono text-green-400 font-bold">0.0Â°</div>
                    </div>
                </div>

                <div class="mt-auto mb-10 z-10">
                    <div class="bg-gray-900/90 backdrop-blur p-6 rounded-2xl border border-gray-700 text-center mx-4 shadow-2xl">
                        <p class="text-gray-400 text-xs mb-1">HESAPLANAN YÃœKSEKLÄ°K</p>
                        <div id="val-result" class="text-6xl font-bold text-white tracking-tighter neon-text">0.00m</div>
                        <div class="mt-2 text-xs font-mono text-green-600">h = tan(Î¸) * d + boy</div>
                    </div>
                    <button id="btn-stop-measure" class="mt-4 bg-red-600 text-white px-6 py-2 rounded-full text-sm font-bold mx-auto block shadow-lg">Ã–lÃ§Ã¼mÃ¼ Durdur</button>
                </div>
            </div>
        </div>

    </main>

    <nav class="bg-black border-t border-gray-800 flex justify-around items-center p-2 pb-safe sticky bottom-0 z-50">
        <button onclick="switchTab('edu')" class="nav-btn active flex flex-col items-center p-2 text-gray-500 hover:text-green-400 transition" data-target="edu">
            <span class="text-xl">ğŸ“</span>
            <span class="text-[10px] font-bold mt-1">EÄŸitim</span>
        </button>
        <button onclick="switchTab('lab')" class="nav-btn flex flex-col items-center p-2 text-gray-500 hover:text-green-400 transition" data-target="lab">
            <span class="text-xl">âˆ¿</span>
            <span class="text-[10px] font-bold mt-1">SinÃ¼s Lab</span>
        </button>
        <button onclick="switchTab('measure')" class="nav-btn flex flex-col items-center p-2 text-gray-500 hover:text-green-400 transition" data-target="measure">
            <span class="text-xl">ğŸ“</span>
            <span class="text-[10px] font-bold mt-1">Ã–lÃ§Ã¼m</span>
        </button>
    </nav>

    <script>
        // --- NAVÄ°GASYON SÄ°STEMÄ° ---
        function switchTab(tabId) {
            // Panelleri gizle/gÃ¶ster
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
            document.getElementById('tab-' + tabId).classList.add('active');
            
            // Buton renklerini gÃ¼ncelle
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if(btn.getAttribute('data-target') === tabId) {
                    btn.classList.add('text-green-400');
                    btn.classList.remove('text-gray-500');
                } else {
                    btn.classList.add('text-gray-500');
                    btn.classList.remove('text-green-400');
                }
            });

            // Sekme deÄŸiÅŸince Ã¶lÃ§Ã¼mÃ¼ durdur (pil tasarrufu)
            if(tabId !== 'measure') stopMeasurement();
        }

        // --- MODÃœL 1: SÄ°NÃœS LAB & SES ---
        let audioCtx = null;
        let oscillator = null;
        let isPlaying = false;
        let animationId = null;

        const sineCanvas = document.getElementById('sineCanvas');
        const ctx = sineCanvas.getContext('2d');
        // Canvas Ã§Ã¶zÃ¼nÃ¼rlÃ¼k ayarÄ±
        sineCanvas.width = sineCanvas.clientWidth * 2;
        sineCanvas.height = sineCanvas.clientHeight * 2;

        document.getElementById('btn-toggle-tone').addEventListener('click', toggleTone);
        document.getElementById('freq-slider').addEventListener('input', updateFreq);

        function toggleTone() {
            const btn = document.getElementById('btn-toggle-tone');
            
            if (isPlaying) {
                // Durdur
                oscillator.stop();
                oscillator = null;
                isPlaying = false;
                btn.innerHTML = "<span>â–¶ï¸</span> Kodu Ã‡alÄ±ÅŸtÄ±r & Sesi Duy";
                btn.classList.remove('bg-red-600');
                btn.classList.add('bg-gray-700');
                cancelAnimationFrame(animationId);
                ctx.clearRect(0,0,sineCanvas.width, sineCanvas.height);
            } else {
                // BaÅŸlat (AudioContext baÅŸlatma - kullanÄ±cÄ± etkileÅŸimi ÅŸart)
                if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                
                oscillator = audioCtx.createOscillator();
                oscillator.type = 'sine';
                oscillator.frequency.value = document.getElementById('freq-slider').value;
                
                // HoparlÃ¶re baÄŸla
                oscillator.connect(audioCtx.destination);
                oscillator.start();
                
                isPlaying = true;
                btn.innerHTML = "<span>â¹</span> Kodu Durdur";
                btn.classList.remove('bg-gray-700');
                btn.classList.add('bg-red-600');
                
                drawSineWave();
            }
        }

        function updateFreq(e) {
            const val = e.target.value;
            document.getElementById('freq-display').innerText = val + " Hz";
            document.getElementById('code-freq-val').innerText = val;
            if (oscillator) {
                oscillator.frequency.value = val;
            }
        }

        function drawSineWave() {
            if (!isPlaying) return;
            
            const width = sineCanvas.width;
            const height = sineCanvas.height;
            const freq = document.getElementById('freq-slider').value;
            
            ctx.fillStyle = 'rgba(0, 0, 0, 0.2)'; // Hafif iz bÄ±rakma efekti
            ctx.fillRect(0, 0, width, height);
            
            ctx.lineWidth = 4;
            ctx.strokeStyle = '#32CD32'; // Neon YeÅŸil
            ctx.beginPath();
            
            // SinÃ¼s Ã‡izimi
            // y = sin(x) formÃ¼lÃ¼ burada gÃ¶rselleÅŸiyor
            const time = Date.now() / 1000;
            const waveLength = 20000 / freq; // Frekansa gÃ¶re dalga boyunu ayarla
            
            for (let x = 0; x < width; x++) {
                // Matematiksel SinÃ¼s FormÃ¼lÃ¼:
                // y = Amplitude * sin(Frequency * x + Phase)
                const y = (height / 2) + Math.sin((x / waveLength) + (time * freq / 10)) * (height / 3);
                
                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            
            ctx.stroke();
            animationId = requestAnimationFrame(drawSineWave);
        }

        // --- MODÃœL 2: Ã–LÃ‡ÃœM (YÃœKSEKLÄ°K) ---
        let measurementActive = false;
        const btnStart = document.getElementById('btn-start-measure');
        const btnStop = document.getElementById('btn-stop-measure');
        
        btnStart.addEventListener('click', requestSensors);
        btnStop.addEventListener('click', stopMeasurement);

        function requestSensors() {
            // iOS 13+ iÃ§in Ä°zin Ä°steÄŸi
            if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission()
                    .then(response => {
                        if (response === 'granted') {
                            startMeasurement();
                        } else {
                            alert("SensÃ¶r izni verilmedi.");
                        }
                    })
                    .catch(console.error);
            } else {
                // Android ve eski iOS
                startMeasurement();
            }
        }

        function startMeasurement() {
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('live-screen').classList.remove('hidden');
            document.getElementById('live-screen').classList.add('flex');
            
            window.addEventListener('deviceorientation', handleOrientation);
            measurementActive = true;
        }

        function stopMeasurement() {
            if(!measurementActive) return;
            window.removeEventListener('deviceorientation', handleOrientation);
            
            document.getElementById('setup-screen').classList.remove('hidden');
            document.getElementById('live-screen').classList.add('hidden');
            document.getElementById('live-screen').classList.remove('flex');
            measurementActive = false;
        }

        // GÃ¼rÃ¼ltÃ¼ Ã¶nlemek iÃ§in basit filtre
        let angleHistory = []; 
        const MAX_HISTORY = 10;

        function handleOrientation(event) {
            let beta = event.beta; // CihazÄ±n Ã¶ne arkaya eÄŸimi (-180, 180)
            
            if (beta === null) return;
            
            // Telefon dik tutulduÄŸunda 90 derece gelir. 
            // Biz yataydan yukarÄ± bakÄ±ÅŸ aÃ§Ä±sÄ±nÄ± istiyoruz.
            // Bu yÃ¼zden genellikle: 90 - beta veya direkt beta (cihaza gÃ¶re deÄŸiÅŸir)
            // Bu basit versiyonda Beta'yÄ± 0-90 arasÄ± limitliyoruz.
            
            if (beta > 90) beta = 90;
            if (beta < 0) beta = 0;
            
            // Ortalama alma (YumuÅŸatma)
            angleHistory.push(beta);
            if (angleHistory.length > MAX_HISTORY) angleHistory.shift();
            
            const avgAngle = angleHistory.reduce((a, b) => a + b, 0) / angleHistory.length;
            
            updateCalculation(avgAngle);
        }

        function updateCalculation(angle) {
            const distance = parseFloat(document.getElementById('input-dist').value);
            const userHeight = parseFloat(document.getElementById('input-height').value);
            
            // Ekrana AÃ§Ä±yÄ± Yaz
            document.getElementById('val-angle').innerText = angle.toFixed(1) + "Â°";
            
            // TRÄ°GONOMETRÄ° HESABI
            // FormÃ¼l: h = tan(aÃ§Ä±) * uzaklÄ±k + boy
            // Not: JavaScript Math.tan() Radyan cinsinden Ã§alÄ±ÅŸÄ±r!
            const angleInRadians = angle * (Math.PI / 180);
            const heightOfObject = Math.tan(angleInRadians) * distance;
            const totalHeight = heightOfObject + userHeight;
            
            document.getElementById('val-result').innerText = totalHeight.toFixed(2) + "m";
        }

    </script>
</body>
</html>
